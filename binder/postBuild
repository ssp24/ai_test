#!/bin/bash

# Ensure the environment variable is available
if [ -z "$OPENAI_API_KEY" ]; then
  echo "Error: OPENAI_API_KEY is not set."
  exit 1
fi

# Set environment variables in .bashrc
echo "export OPENAI_API_KEY='$OPENAI_API_KEY'" >> ~/.bashrc

# Create JupyterLab configuration
mkdir -p ~/.jupyter/lab/user-settings/@jupyter-ai/jupyter-ai
cat <<EOF > ~/.jupyter/lab/user-settings/@jupyter-ai/jupyter-ai/plugin.jupyterlab-settings
{
    "defaultLanguageModel": "openai-chat:gpt-4"
}
EOF

